(()=>{"use strict";var l,v,m,d,L={8787:(l,v,m)=>{m.a(l,async(d,R)=>{try{var x=m(791),w=m(1506),S=d([w]);w=(S.then?(await S)():S)[0];const t={Ants:x.v.solveTravelingSalesmanProblemACO,Genetic:x.v.solveTravelingSalesmanProblemGA,Little:x.v.solveTravelingSalesmanProblemLittle,LittleWASM:n=>{try{const r=JSON.parse((0,w.Nb)(JSON.stringify({data:n})));return{vertices:r.path,distance:r.distance,paths:r.steps}}catch{return null}}};self.onmessage=({data:n})=>{const{method:r,adjacencyMatrix:o}=n,c=t[r];if(c){const g=performance.now(),f=c(o),b=performance.now()-g;self.postMessage({solution:f,timeElapsed:b})}else console.error(`Unknown method: ${r}`)},R()}catch(t){R(t)}})},791:(l,v,m)=>{m.d(v,{v:()=>w});class d{static rowReduction(t){const n=[],r=t.map(o=>{const c=Math.min(...o);return n.push(c),o.map(g=>g!==1/0?g-c:g)});return{redux:n,matrix:r}}static columnReduction(t){const n=t.map((c,g)=>t.map(f=>f[g])),r=d.rowReduction(n),o=r.matrix[0].map((c,g)=>r.matrix.map(f=>f[g]));return{redux:r.redux,matrix:o}}static reduceMatrix(t){const n=d.rowReduction(t),r=d.columnReduction(n.matrix);return{matrix:r.matrix,lowerBound:[...n.redux,...r.redux].reduce((o,c)=>o+c,0)}}get valid(){return this.lowerBound!==1/0}get distance(){return this.lowerBound}constructor(t,n=0,r={rows:Array.from({length:t.length}).map((c,g)=>g),cols:Array.from({length:t.length}).map((c,g)=>g)},o=[]){this.matrix=t,this.lowerBound=n,this.indexes=r,this.path=o}isScalar(){return 1===this.matrix.length}compareTo(t){return this.lowerBound-t.lowerBound}restorePath(){const t=[],n=[...this.path,[this.indexes.rows[0],this.indexes.cols[0]]];let r=n.shift()??[-1,-1];for(t.push(r[0]);n.length>0;){const o=n.findIndex(c=>c[0]===r[1]);if(-1===o)break;r=n[o],n.splice(o,1),t.push(r[0])}return t.push(r[1]),t}dryReduceMatrix(t,n,r){this.blockPath(t,n),this.lowerBound+=r;const{matrix:o}=d.reduceMatrix(this.matrix);this.matrix=o}transform(t,n){const r=this.indexes.rows.indexOf(t),o=this.indexes.cols.indexOf(n),c=this.matrix.map(I=>[...I]),g=this.indexes.cols.indexOf(t),f=this.indexes.rows.indexOf(n);-1!==g&&-1!==f&&(c[f][g]=1/0);const p=c.filter((I,P)=>P!==r).map(I=>I.filter((P,F)=>F!==o)),{matrix:b,lowerBound:C}=d.reduceMatrix(p);return new d(b,this.lowerBound+C,{rows:this.indexes.rows.filter((I,P)=>P!==r),cols:this.indexes.cols.filter((I,P)=>P!==o)},[...this.path,[t,n]])}calculatePenalties(){let n,t=-1/0;const r=Array(this.matrix.length).fill(0).map(()=>Array(this.matrix.length).fill(0));for(let o=0;o<this.matrix.length;o++)for(let c=0;c<this.matrix[o].length;c++)if(0===this.matrix[o][c]){const g=Math.min(...this.matrix[o].filter((p,b)=>b!==c&&p!==1/0)),f=Math.min(...this.matrix.map((p,b)=>b!==o&&p[c]!==1/0?p[c]:1/0));r[o][c]=g+f,r[o][c]>=t&&(t=r[o][c],n=[o,c])}return n?{penalty:t,maxPenaltyPos:[this.indexes.rows[n[0]],this.indexes.cols[n[1]]]}:{penalty:-1,maxPenaltyPos:[-1,-1]}}blockPath(t,n){const r=this.indexes.rows.indexOf(t),o=this.indexes.cols.indexOf(n);-1!==o&&-1!==r&&(this.matrix[r][o]=1/0)}}class R{constructor(t){this.value=t,this.left=null,this.right=null,this.npl=0}compareTo(t){return this.value.compareTo(t.value)}}class x{constructor(){this.root=null}enqueue(t){this.root=this.merge(this.root,new R(t))}dequeue(){if(!this.root)return;const t=this.root.value;return this.root=this.merge(this.root.left,this.root.right),t}isEmpty(){return null===this.root}merge(t,n){return t?(n&&(t.compareTo(n)>0&&([t,n]=[n,t]),t.right=this.merge(t.right,n),(!t.left||t.right&&t.left.npl<t.right.npl)&&([t.left,t.right]=[t.right,t.left]),t.npl=t.right?t.right.npl+1:1),t):n}}class w{static solveTravelingSalesmanProblemACO(t){const n=10*t.length,b=t.map(s=>s.map(i=>0===i?1/0:i)),C=1/(t.length*t.length),I=t.reduce((s,i)=>s+i.reduce((h,e)=>h+e,0),0),P=t.map(s=>s.map(i=>C/I*i)),F=(s,i)=>b[s][i];let T=1/0,u=[],M=[],k=0;for(let s=0;s<1e4;s++){const i=Array.from({length:n},()=>({path:[0],currentNode:0,cost:0}));if(i.forEach(e=>{k++;const a=new Set(e.path);for(;a.size<t.length;){const N=t[e.currentNode].map((A,O)=>O).filter(A=>!a.has(A)&&F(e.currentNode,A)),y=N.reduce((A,O)=>A+Math.pow(P[e.currentNode][O],1)*Math.pow(1/F(e.currentNode,O),1),0),j=N.map(A=>({dest:A,prob:Math.pow(P[e.currentNode][A],1)*Math.pow(1/F(e.currentNode,A),1)/y}));j.sort((A,O)=>O.prob-A.prob);const E=Math.random();let Q=0,z=-1;for(const A of j)if(Q+=A.prob,Q>=E){z=A.dest;break}if(-1===z)break;e.path.push(z),e.currentNode=z,a.add(z),e.cost+=F(e.path[e.path.length-2],e.currentNode)}e.cost+=F(e.currentNode,0),e.cost<T&&e.path.length===t.length&&(T=e.cost,u=[...e.path,0])}),s%50==0&&M.toString()===u.toString()&&T<1/0)return{vertices:u,distance:T,paths:k};const h=i.map(e=>{const a=e.path,N=e.cost,y=Array.from({length:t.length},()=>0);for(let j=0;j<a.length-1;j++){const Q=a[j+1];y[a[j]]+=100/N,y[Q]+=100/N}return y});for(let e=0;e<t.length;e++)for(let a=0;a<t.length;a++)e!==a&&(P[e][a]=.5*P[e][a]+h[e][a]);M=u}return u.length===t.length&&isFinite(T)?{vertices:u,distance:T,paths:k}:null}static solveTravelingSalesmanProblemGA(t){const n=t.length,r=20*n,o=Math.trunc(1e5/n),c=Math.trunc(.1*r),f=t.map(s=>s.map(i=>0===i?1/0:i)),p=s=>{let i=0,h=0;for(let e=0;e<s.length;e++){const a=f[s[e]][s[(e+1)%s.length]];isFinite(1/0)||++i,h+=a}return 1/h/(i+1)},b=(s,i)=>{const h=[...s];if(Math.random()<i){let e=Math.floor(Math.random()*h.length),a=Math.floor(Math.random()*h.length);for(;e===a;)a=Math.floor(Math.random()*h.length);for(a<e&&([e,a]=[a,e]);e<a;)[h[e],h[a]]=[h[a],h[e]],e++,a--}return h},C=(s,i)=>{const h=s.length,e=new Array(h).fill(-1),a=Math.floor(Math.random()*h),N=a+Math.floor(Math.random()*(h-a));for(let y=a;y<=N;y++)e[y]=s[y];for(let y=0;y<h;y++)if(!e.includes(i[y])){let j=y;for(;-1!==e[j];)j=s.indexOf(i[j]);e[j]=i[y]}return e};let I=Array.from({length:r},()=>{const s=Array.from({length:n},(i,h)=>h);for(let i=s.length-1;i>0;i--){const h=Math.floor(Math.random()*(i+1));[s[i],s[h]]=[s[h],s[i]]}return s}),P=0,F=[],T=-1/0,u=0;for(let s=0;s<o;s++){let i=-1/0;I.sort((N,y)=>p(y)-p(N)),u+=I.length;const h=I.slice(0,c),e=[...h],a=(N,y)=>{const j=N.reduce((O,J)=>O+y(J),0),E=Math.random()*j;let z,A,Q=0;for(const O of N)if(Q+=y(O),!z&&Q>=E)z=O;else if(z&&!A&&Q>=E){A=O;break}if(!A){const O=N.filter(V=>V!==z);A=O[Math.floor(Math.random()*O.length)]}return[z,A]};for(let N=0;N<r-c;N++){let y=C(...a(h,p));y=b(y,.05),e.push(y);const j=p(y);j>i&&(i=j,F=y)}if(I=e,i>T)T=i,P=0;else if(i>0&&P++>=5)break}const k=(s=F).reduce((i,h,e)=>i+f[h][s[(e+1)%f.length]],0);var s;return isFinite(k)?{vertices:[...F,F[0]],distance:k,paths:u}:null}static solveTravelingSalesmanProblemLittle(t){let n=0;const r=t.map(f=>f.map(p=>0===p?1/0:p)),o=new x,{matrix:c,lowerBound:g}=d.reduceMatrix(r);for(o.enqueue(new d(c,g));!o.isEmpty();){const f=o.dequeue();if(!f||!f.valid)return null;if(f.isScalar()){const I=f.restorePath();if(I.length===t.length+1)return{vertices:I,distance:f.distance,paths:n};continue}const{penalty:p,maxPenaltyPos:[b,C]}=f.calculatePenalties();if(-1===p)return null;o.enqueue(f.transform(b,C)),p!==1/0&&(f.dryReduceMatrix(b,C,p),o.enqueue(f)),n++}return null}}},1506:(l,v,m)=>{m.a(l,async(d,R)=>{try{m.d(v,{Nb:()=>w.Nb});var x=m(1556),w=m(6780),S=d([x]);x=(S.then?(await S)():S)[0],(0,w.oT)(x),R()}catch(t){R(t)}})},6780:(l,v,m)=>{let d;function R(u){d=u}m.d(v,{Ed:()=>P,Nb:()=>I,Nz:()=>F,Or:()=>T,oT:()=>R}),l=m.hmd(l);let w=new(typeof TextDecoder>"u"?(0,l.require)("util").TextDecoder:TextDecoder)("utf-8",{ignoreBOM:!0,fatal:!0});w.decode();let S=null;function t(){return(null===S||0===S.byteLength)&&(S=new Uint8Array(d.memory.buffer)),S}function n(u,M){return u>>>=0,w.decode(t().subarray(u,u+M))}let r=0,c=new(typeof TextEncoder>"u"?(0,l.require)("util").TextEncoder:TextEncoder)("utf-8");const g="function"==typeof c.encodeInto?function(u,M){return c.encodeInto(u,M)}:function(u,M){const k=c.encode(u);return M.set(k),{read:u.length,written:k.length}};let b=null;function C(){return(null===b||0===b.byteLength)&&(b=new Int32Array(d.memory.buffer)),b}function I(u){let M,k;try{const h=d.__wbindgen_add_to_stack_pointer(-16),e=function f(u,M,k){if(void 0===k){const a=c.encode(u),N=M(a.length,1)>>>0;return t().subarray(N,N+a.length).set(a),r=a.length,N}let s=u.length,i=M(s,1)>>>0;const h=t();let e=0;for(;e<s;e++){const a=u.charCodeAt(e);if(a>127)break;h[i+e]=a}if(e!==s){0!==e&&(u=u.slice(e)),i=k(i,s,s=e+3*u.length,1)>>>0;const a=t().subarray(i+e,i+s);e+=g(u,a).written}return r=e,i}(u,d.__wbindgen_malloc,d.__wbindgen_realloc);d.solve_traveling_salesman_problem_little_js(h,e,r);var s=C()[h/4+0],i=C()[h/4+1];return M=s,k=i,n(s,i)}finally{d.__wbindgen_add_to_stack_pointer(16),d.__wbindgen_free(M,k,1)}}function P(u,M){alert(n(u,M))}function F(u,M){console.log(n(u,M))}function T(u,M){throw new Error(n(u,M))}},1556:(l,v,m)=>{var d=m(6780);l.exports=m.v(v,l.id,"fba83e6f45594783",{"./graph_algorims_bg.js":{__wbg_alert_2835ba22f9dbd362:d.Ed,__wbg_log_7540120b6a8b567a:d.Nz,__wbindgen_throw:d.Or}})}},W={};function B(l){var v=W[l];if(void 0!==v)return v.exports;var m=W[l]={id:l,loaded:!1,exports:{}};return L[l](m,m.exports,B),m.loaded=!0,m.exports}l="function"==typeof Symbol?Symbol("webpack queues"):"__webpack_queues__",v="function"==typeof Symbol?Symbol("webpack exports"):"__webpack_exports__",m="function"==typeof Symbol?Symbol("webpack error"):"__webpack_error__",d=x=>{x&&!x.d&&(x.d=1,x.forEach(w=>w.r--),x.forEach(w=>w.r--?w.r++:w()))},B.a=(x,w,S)=>{var t;S&&((t=[]).d=1);var o,c,g,n=new Set,r=x.exports,f=new Promise((p,b)=>{g=b,c=p});f[v]=r,f[l]=p=>(t&&p(t),n.forEach(p),f.catch(b=>{})),x.exports=f,w(p=>{o=(x=>x.map(w=>{if(null!==w&&"object"==typeof w){if(w[l])return w;if(w.then){var S=[];S.d=0,w.then(r=>{t[v]=r,d(S)},r=>{t[m]=r,d(S)});var t={};return t[l]=r=>r(S),t}}var n={};return n[l]=r=>{},n[v]=w,n}))(p);var b,C=()=>o.map(P=>{if(P[m])throw P[m];return P[v]}),I=new Promise(P=>{(b=()=>P(C)).r=0;var F=T=>T!==t&&!n.has(T)&&(n.add(T),T&&!T.d&&(b.r++,T.push(b)));o.map(T=>T[l](F))});return b.r?I:C()},p=>(p?g(f[m]=p):c(r),d(t))),t&&(t.d=0)},B.d=(l,v)=>{for(var m in v)B.o(v,m)&&!B.o(l,m)&&Object.defineProperty(l,m,{enumerable:!0,get:v[m]})},B.hmd=l=>((l=Object.create(l)).children||(l.children=[]),Object.defineProperty(l,"exports",{enumerable:!0,set:()=>{throw new Error("ES Modules may not assign module.exports or exports.*, Use ESM export syntax, instead: "+l.id)}}),l),B.o=(l,v)=>Object.prototype.hasOwnProperty.call(l,v),B.v=(l,v,m,d)=>{var R=fetch(B.p+""+m+".module.wasm");return"function"==typeof WebAssembly.instantiateStreaming?WebAssembly.instantiateStreaming(R,d).then(x=>Object.assign(l,x.instance.exports)):R.then(x=>x.arrayBuffer()).then(x=>WebAssembly.instantiate(x,d)).then(x=>Object.assign(l,x.instance.exports))},B.p="",B(8787)})();