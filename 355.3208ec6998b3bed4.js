(()=>{"use strict";var l,S,f,y,$={4355:(l,S,f)=>{f.a(l,async(y,R)=>{try{var h=f(7592),g=f(1042),N=y([g]);g=(N.then?(await N)():N)[0];const t={Ants:h.v.solveTravelingSalesmanProblemACO,Genetic:h.v.solveTravelingSalesmanProblemGA,Little:h.v.solveTravelingSalesmanProblemLittle,LittleWASM:e=>{const n=JSON.parse((0,g.N)(JSON.stringify({data:e})));return n.error?null:{vertices:n.path,distance:n.distance,paths:n.steps}}};self.onmessage=({data:e})=>{const{method:n,adjacencyMatrix:o}=e,a=t[n];if(a){const x=performance.now(),u=a(o),M=performance.now()-x;self.postMessage({solution:u,timeElapsed:M})}else console.error(`Unknown method: ${n}`)},R()}catch(t){R(t)}})},7592:(l,S,f)=>{f.d(S,{v:()=>g});class y{static rowReduction(t){const e=[],n=t.map(o=>{const a=Math.min(...o);return e.push(a),o.map(x=>x!==1/0?x-a:x)});return{redux:e,matrix:n}}static columnReduction(t){const e=t.map((a,x)=>t.map(u=>u[x])),n=y.rowReduction(e),o=n.matrix[0].map((a,x)=>n.matrix.map(u=>u[x]));return{redux:n.redux,matrix:o}}static reduceMatrix(t){const e=y.rowReduction(t),n=y.columnReduction(e.matrix);return{matrix:n.matrix,lowerBound:[...e.redux,...n.redux].reduce((o,a)=>o+a,0)}}get valid(){return this.lowerBound!==1/0}get distance(){return this.lowerBound}constructor(t,e=0,n={rows:Array.from({length:t.length}).map((a,x)=>x),cols:Array.from({length:t.length}).map((a,x)=>x)},o=[]){this.matrix=t,this.lowerBound=e,this.indexes=n,this.path=o}isScalar(){return 1===this.matrix.length}compareTo(t){return this.lowerBound-t.lowerBound}restorePath(){const t=[],e=[...this.path,[this.indexes.rows[0],this.indexes.cols[0]]];let n=e.shift()??[-1,-1];for(t.push(n[0]);e.length>0;){const o=e.findIndex(a=>a[0]===n[1]);if(-1===o)break;n=e[o],e.splice(o,1),t.push(n[0])}return t.push(n[1]),t}dryReduceMatrix(t,e,n){this.blockPath(t,e),this.lowerBound+=n;const{matrix:o}=y.reduceMatrix(this.matrix);this.matrix=o}transform(t,e){const n=this.indexes.rows.indexOf(t),o=this.indexes.cols.indexOf(e),a=this.matrix.map(c=>[...c]),x=this.indexes.cols.indexOf(t),u=this.indexes.rows.indexOf(e);-1!==x&&-1!==u&&(a[u][x]=1/0);const d=a.filter((c,m)=>m!==n).map(c=>c.filter((m,P)=>P!==o)),{matrix:M,lowerBound:C}=y.reduceMatrix(d);return new y(M,this.lowerBound+C,{rows:this.indexes.rows.filter((c,m)=>m!==n),cols:this.indexes.cols.filter((c,m)=>m!==o)},[...this.path,[t,e]])}calculatePenalties(){let e,t=-1/0;const n=Array(this.matrix.length).fill(0).map(()=>Array(this.matrix.length).fill(0));for(let o=0;o<this.matrix.length;o++)for(let a=0;a<this.matrix[o].length;a++)if(0===this.matrix[o][a]){const x=Math.min(...this.matrix[o].filter((d,M)=>M!==a&&d!==1/0)),u=Math.min(...this.matrix.map((d,M)=>M!==o&&d[a]!==1/0?d[a]:1/0));n[o][a]=x+u,n[o][a]>=t&&(t=n[o][a],e=[o,a])}return e?{penalty:t,maxPenaltyPos:[this.indexes.rows[e[0]],this.indexes.cols[e[1]]]}:{penalty:-1,maxPenaltyPos:[-1,-1]}}blockPath(t,e){const n=this.indexes.rows.indexOf(t),o=this.indexes.cols.indexOf(e);-1!==o&&-1!==n&&(this.matrix[n][o]=1/0)}}class R{constructor(t){this.value=t,this.left=null,this.right=null,this.npl=0}compareTo(t){return this.value.compareTo(t.value)}}class h{constructor(){this.root=null}enqueue(t){this.root=this.merge(this.root,new R(t))}dequeue(){if(!this.root)return;const t=this.root.value;return this.root=this.merge(this.root.left,this.root.right),t}isEmpty(){return null===this.root}merge(t,e){return t?(e&&(t.compareTo(e)>0&&([t,e]=[e,t]),t.right=this.merge(t.right,e),(!t.left||t.right&&t.left.npl<t.right.npl)&&([t.left,t.right]=[t.right,t.left]),t.npl=t.right?t.right.npl+1:1),t):e}}class g{static solveTravelingSalesmanProblemACO(t){const e=10*t.length,M=t.map(i=>i.map(s=>0===s?1/0:s)),C=1/(t.length*t.length),c=t.reduce((i,s)=>i+s.reduce((v,r)=>v+r,0),0),m=t.map(i=>i.map(s=>C/c*s)),P=(i,s)=>M[i][s];let w=1/0,A=[],Q=[],I=0;for(let i=0;i<1e4;i++){const s=Array.from({length:e},()=>({path:[0],currentNode:0,cost:0}));if(s.forEach(r=>{I++;const p=new Set(r.path);for(;p.size<t.length;){const j=t[r.currentNode].map((T,F)=>F).filter(T=>!p.has(T)&&P(r.currentNode,T)),b=j.reduce((T,F)=>T+Math.pow(m[r.currentNode][F],1)*Math.pow(1/P(r.currentNode,F),1),0),k=j.map(T=>({dest:T,prob:Math.pow(m[r.currentNode][T],1)*Math.pow(1/P(r.currentNode,T),1)/b}));k.sort((T,F)=>F.prob-T.prob);const J=Math.random();let z=0,O=-1;for(const T of k)if(z+=T.prob,z>=J){O=T.dest;break}if(-1===O)break;r.path.push(O),r.currentNode=O,p.add(O),r.cost+=P(r.path[r.path.length-2],r.currentNode)}r.cost+=P(r.currentNode,0),r.cost<w&&r.path.length===t.length&&(w=r.cost,A=[...r.path,0])}),i%50==0&&Q.toString()===A.toString()&&w<1/0)return{vertices:A,distance:w,paths:I};const v=s.map(r=>{const p=r.path,j=r.cost,b=Array.from({length:t.length},()=>0);for(let k=0;k<p.length-1;k++){const z=p[k+1];b[p[k]]+=100/j,b[z]+=100/j}return b});for(let r=0;r<t.length;r++)for(let p=0;p<t.length;p++)r!==p&&(m[r][p]=.5*m[r][p]+v[r][p]);Q=A}return A.length===t.length&&isFinite(w)?{vertices:A,distance:w,paths:I}:null}static solveTravelingSalesmanProblemGA(t){const e=t.length,n=20*e,o=Math.trunc(1e5/e),a=Math.trunc(.1*n),u=t.map(i=>i.map(s=>0===s?1/0:s)),d=i=>{let s=0,v=0;for(let r=0;r<i.length;r++){const p=u[i[r]][i[(r+1)%i.length]];isFinite(1/0)||++s,v+=p}return 1/v/(s+1)},M=(i,s)=>{const v=[...i];if(Math.random()<s){let r=Math.floor(Math.random()*v.length),p=Math.floor(Math.random()*v.length);for(;r===p;)p=Math.floor(Math.random()*v.length);for(p<r&&([r,p]=[p,r]);r<p;)[v[r],v[p]]=[v[p],v[r]],r++,p--}return v},C=(i,s)=>{const v=i.length,r=new Array(v).fill(-1),p=Math.floor(Math.random()*v),j=p+Math.floor(Math.random()*(v-p));for(let b=p;b<=j;b++)r[b]=i[b];for(let b=0;b<v;b++)if(!r.includes(s[b])){let k=b;for(;-1!==r[k];)k=i.indexOf(s[k]);r[k]=s[b]}return r};let c=Array.from({length:n},()=>{const i=Array.from({length:e},(s,v)=>v);for(let s=i.length-1;s>0;s--){const v=Math.floor(Math.random()*(s+1));[i[s],i[v]]=[i[v],i[s]]}return i}),m=0,P=[],w=-1/0,A=0;for(let i=0;i<o;i++){let s=-1/0;c.sort((j,b)=>d(b)-d(j)),A+=c.length;const v=c.slice(0,a),r=[...v],p=(j,b)=>{const k=j.reduce((F,V)=>F+b(V),0),J=Math.random()*k;let O,T,z=0;for(const F of j)if(z+=b(F),!O&&z>=J)O=F;else if(O&&!T&&z>=J){T=F;break}if(!T){const F=j.filter(H=>H!==O);T=F[Math.floor(Math.random()*F.length)]}return[O,T]};for(let j=0;j<n-a;j++){let b=C(...p(v,d));b=M(b,.05),r.push(b);const k=d(b);k>s&&(s=k,P=b)}if(c=r,s>w)w=s,m=0;else if(s>0&&m++>=5)break}const I=(i=P).reduce((s,v,r)=>s+u[v][i[(r+1)%u.length]],0);var i;return isFinite(I)?{vertices:[...P,P[0]],distance:I,paths:A}:null}static solveTravelingSalesmanProblemLittle(t){let e=0;const n=t.map(u=>u.map(d=>0===d?1/0:d)),o=new h,{matrix:a,lowerBound:x}=y.reduceMatrix(n);for(o.enqueue(new y(a,x));!o.isEmpty();){const u=o.dequeue();if(!u||!u.valid)return null;if(u.isScalar()){const c=u.restorePath();if(c.length===t.length+1)return{vertices:c,distance:u.distance,paths:e};continue}const{penalty:d,maxPenaltyPos:[M,C]}=u.calculatePenalties();if(-1===d)return null;o.enqueue(u.transform(M,C)),d!==1/0&&(u.dryReduceMatrix(M,C,d),o.enqueue(u)),e++}return null}}},1042:(l,S,f)=>{f.a(l,async(y,R)=>{try{f.d(S,{N:()=>g.N});var h=f(4462),g=f(6577),N=y([h]);h=(N.then?(await N)():N)[0],(0,g.o)(h),R()}catch(t){R(t)}})},6577:(l,S,f)=>{let y;function R(c){y=c}f.d(S,{N:()=>C,o:()=>R}),l=f.hmd(l);let h=0,g=null;function N(){return(null===g||0===g.byteLength)&&(g=new Uint8Array(y.memory.buffer)),g}let e=new(typeof TextEncoder>"u"?(0,l.require)("util").TextEncoder:TextEncoder)("utf-8");const n="function"==typeof e.encodeInto?function(c,m){return e.encodeInto(c,m)}:function(c,m){const P=e.encode(c);return m.set(P),{read:c.length,written:P.length}};let a=null;function x(){return(null===a||0===a.byteLength)&&(a=new Int32Array(y.memory.buffer)),a}let d=new(typeof TextDecoder>"u"?(0,l.require)("util").TextDecoder:TextDecoder)("utf-8",{ignoreBOM:!0,fatal:!0});function C(c){let m,P;try{const Q=y.__wbindgen_add_to_stack_pointer(-16),I=function o(c,m,P){if(void 0===P){const i=e.encode(c),s=m(i.length,1)>>>0;return N().subarray(s,s+i.length).set(i),h=i.length,s}let w=c.length,A=m(w,1)>>>0;const Q=N();let I=0;for(;I<w;I++){const i=c.charCodeAt(I);if(i>127)break;Q[A+I]=i}if(I!==w){0!==I&&(c=c.slice(I)),A=P(A,w,w=I+3*c.length,1)>>>0;const i=N().subarray(A+I,A+w);I+=n(c,i).written}return h=I,A}(c,y.__wbindgen_malloc,y.__wbindgen_realloc);y.solve_traveling_salesman_problem_little_js(Q,I,h);var w=x()[Q/4+0],A=x()[Q/4+1];return m=w,P=A,function M(c,m){return c>>>=0,d.decode(N().subarray(c,c+m))}(w,A)}finally{y.__wbindgen_add_to_stack_pointer(16),y.__wbindgen_free(m,P,1)}}d.decode()},4462:(l,S,f)=>{l.exports=f.v(S,l.id,"efe3c0b9837dcc3d")}},W={};function B(l){var S=W[l];if(void 0!==S)return S.exports;var f=W[l]={id:l,loaded:!1,exports:{}};return $[l](f,f.exports,B),f.loaded=!0,f.exports}l="function"==typeof Symbol?Symbol("webpack queues"):"__webpack_queues__",S="function"==typeof Symbol?Symbol("webpack exports"):"__webpack_exports__",f="function"==typeof Symbol?Symbol("webpack error"):"__webpack_error__",y=h=>{h&&!h.d&&(h.d=1,h.forEach(g=>g.r--),h.forEach(g=>g.r--?g.r++:g()))},B.a=(h,g,N)=>{var t;N&&((t=[]).d=1);var o,a,x,e=new Set,n=h.exports,u=new Promise((d,M)=>{x=M,a=d});u[S]=n,u[l]=d=>(t&&d(t),e.forEach(d),u.catch(M=>{})),h.exports=u,g(d=>{o=(h=>h.map(g=>{if(null!==g&&"object"==typeof g){if(g[l])return g;if(g.then){var N=[];N.d=0,g.then(n=>{t[S]=n,y(N)},n=>{t[f]=n,y(N)});var t={};return t[l]=n=>n(N),t}}var e={};return e[l]=n=>{},e[S]=g,e}))(d);var M,C=()=>o.map(m=>{if(m[f])throw m[f];return m[S]}),c=new Promise(m=>{(M=()=>m(C)).r=0;var P=w=>w!==t&&!e.has(w)&&(e.add(w),w&&!w.d&&(M.r++,w.push(M)));o.map(w=>w[l](P))});return M.r?c:C()},d=>(d?x(u[f]=d):a(n),y(t))),t&&(t.d=0)},B.d=(l,S)=>{for(var f in S)B.o(S,f)&&!B.o(l,f)&&Object.defineProperty(l,f,{enumerable:!0,get:S[f]})},B.hmd=l=>((l=Object.create(l)).children||(l.children=[]),Object.defineProperty(l,"exports",{enumerable:!0,set:()=>{throw new Error("ES Modules may not assign module.exports or exports.*, Use ESM export syntax, instead: "+l.id)}}),l),B.o=(l,S)=>Object.prototype.hasOwnProperty.call(l,S),B.v=(l,S,f,y)=>{var R=fetch(B.p+""+f+".module.wasm");return"function"==typeof WebAssembly.instantiateStreaming?WebAssembly.instantiateStreaming(R,y).then(h=>Object.assign(l,h.instance.exports)):R.then(h=>h.arrayBuffer()).then(h=>WebAssembly.instantiate(h,y)).then(h=>Object.assign(l,h.instance.exports))},B.p="",B(4355)})();